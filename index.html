<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="telegram:webview_version" content="2.0">
    <title>Zero Emission Games</title>
    <script src="https://telegram.org/js/telegram-web-app-2.0.js"></script>
    <style>
        :root {
            --tg-bg: var(--tg-theme-bg-color, #ffffff);
            --tg-text: var(--tg-theme-text-color, #222222);
            --tg-button: var(--tg-theme-button-color, #34b7f1);
            --tg-secondary: var(--tg-theme-secondary-bg-color, #f4f4f4);
        }
        
        body {
            margin: 0;
            padding: 16px;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--tg-bg);
            color: var(--tg-text);
            min-height: 100vh;
            box-sizing: border-box;
        }
        
        .header {
            text-align: center;
            margin-bottom: 24px;
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 14px;
            margin: 12px 0;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            background: var(--tg-button);
            color: var(--tg-theme-button-text-color, #fff);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .btn:active {
            transform: scale(0.96);
        }
        
        .btn-support {
            background: var(--tg-secondary);
            color: var(--tg-text);
        }
        
        .game-item {
            padding: 16px;
            margin: 10px 0;
            background: var(--tg-secondary);
            border-radius: 10px;
            cursor: pointer;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div id="main-menu">
        <div class="header">
            <h1>Zero Emission</h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:</p>
        </div>
        
        <button id="games-btn" class="btn">üéÆ –ò–≥—Ä–∞—Ç—å</button>
        <button id="support-btn" class="btn btn-support">üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
    </div>
    
    <div id="games-menu" class="hidden">
        <div class="header">
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É</h2>
        </div>
        
        <div class="game-item" data-game="clumsy-bird">
            Clumsy Bird
        </div>
        
        <div class="game-item" data-game="pacman">
            Pacman
        </div>
        
        <div class="game-item" data-game="racer">
            3D Racer
        </div>
        
        <button id="back-btn" class="btn">‚Üê –ù–∞–∑–∞–¥</button>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        document.addEventListener('DOMContentLoaded', () => {
            const tg = window.Telegram?.WebApp;
            
            if (tg) {
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                tg.expand();
                tg.setHeaderColor('secondary_bg');
                tg.ready();
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –≤ Telegram
                tg.onEvent('backButtonClicked', showMainMenu);
            }
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            const gamesBtn = document.getElementById('games-btn');
            const supportBtn = document.getElementById('support-btn');
            const backBtn = document.getElementById('back-btn');
            const gameItems = document.querySelectorAll('.game-item');
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            gamesBtn.addEventListener('click', showGamesMenu);
            supportBtn.addEventListener('click', contactSupport);
            backBtn.addEventListener('click', showMainMenu);
            
            gameItems.forEach(item => {
                item.addEventListener('click', () => {
                    const game = item.getAttribute('data-game');
                    openGame(game);
                });
            });
            
            // –§—É–Ω–∫—Ü–∏–∏
            function showGamesMenu() {
                document.getElementById('main-menu').classList.add('hidden');
                document.getElementById('games-menu').classList.remove('hidden');
                if (tg) tg.BackButton.show();
            }
            
            function showMainMenu() {
                document.getElementById('games-menu').classList.add('hidden');
                document.getElementById('main-menu').classList.remove('hidden');
                if (tg) tg.BackButton.hide();
            }
            
            function contactSupport() {
                if (tg) {
                    tg.openTelegramLink('https://t.me/your_support_bot');
                } else {
                    window.open('https://t.me/your_support_bot', '_blank');
                }
            }
            
            function openGame(game) {
                const urls = {
                    'clumsy-bird': 'https://ellisonleao.github.io/clumsy-bird/',
                    'pacman': 'https://pacman.platzh1rsch.ch/',
                    'racer': 'https://codeincomplete.com/games/racer/v4-final/'
                };
                
                if (tg) {
                    tg.openLink(urls[game], { 
                        try_instant_view: true,
                        instant_view_theme: tg.colorScheme 
                    });
                } else {
                    window.open(urls[game], '_blank');
                }
            }
        });
    </script>
</body>
</html>
