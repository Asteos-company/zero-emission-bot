<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero Emission Games</title>
    <script src="https://telegram.org/js/game.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: var(--tg-theme-bg-color, #f5f5f5);
            color: var(--tg-theme-text-color, #333);
            text-align: center;
            height: 100vh;
            overflow: hidden;
        }
        .btn {
            display: block;
            width: 90%;
            max-width: 300px;
            margin: 15px auto;
            padding: 12px;
            background: var(--tg-theme-button-color, #34b7f1);
            color: var(--tg-theme-button-text-color, white);
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .btn:hover {
            background: var(--tg-theme-secondary-bg-color, #2aa7e1);
        }
        .btn-support {
            background: var(--tg-theme-link-color, #f1c40f);
        }
        .game-container {
            display: none;
            height: calc(100vh - 60px);
            overflow: hidden;
        }
        canvas {
            background: #222;
            margin: 10px auto;
            display: block;
            max-width: 100%;
            max-height: calc(100vh - 100px);
        }
        h1, h2 {
            color: var(--tg-theme-text-color, #333);
            margin: 10px 0;
        }
    </style>
</head>
<body>
<div id="menu">
    <h1>Zero Emission Games</h1>
    <button id="play-btn" class="btn">üéÆ –ò–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—ã</button>
    <button id="support-btn" class="btn btn-support">üí¨ –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</button>
</div>

<div id="games-menu" class="game-container">
    <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É:</h2>
    <button id="game1-btn" class="btn">Clumsy Bird</button>
    <button id="game2-btn" class="btn">Pacman</button>
    <button id="game3-btn" class="btn">3D Racer</button>
    <button id="back-btn" class="btn">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<div id="game1" class="game-container">
    <h2>Clumsy Bird</h2>
    <canvas id="bird-canvas" width="300" height="400"></canvas>
    <button id="back-to-menu1" class="btn">‚Üê –í –º–µ–Ω—é</button>
</div>

<div id="game2" class="game-container">
    <h2>Pacman</h2>
    <canvas id="pacman-canvas" width="300" height="400"></canvas>
    <button id="back-to-menu2" class="btn">‚Üê –í –º–µ–Ω—é</button>
</div>

<div id="game3" class="game-container">
    <h2>3D Racer</h2>
    <canvas id="racer-canvas" width="300" height="400"></canvas>
    <button id="back-to-menu3" class="btn">‚Üê –í –º–µ–Ω—é</button>
</div>

<script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    const tg = window.Telegram.WebApp;
    tg.expand(); // –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

    // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    const menu = document.getElementById('menu');
    const gamesMenu = document.getElementById('games-menu');
    const game1 = document.getElementById('game1');
    const game2 = document.getElementById('game2');
    const game3 = document.getElementById('game3');

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
    document.getElementById('play-btn').onclick = () => {
        menu.style.display = 'none';
        gamesMenu.style.display = 'block';
    };

    document.getElementById('support-btn').onclick = () => {
        tg.openTelegramLink('https://t.me/your_support');
    };

    document.getElementById('back-btn').onclick = () => {
        gamesMenu.style.display = 'none';
        menu.style.display = 'block';
        hideAllGames();
    };

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ –∏–≥—Ä
    document.getElementById('game1-btn').onclick = () => {
        gamesMenu.style.display = 'none';
        game1.style.display = 'block';
        initBirdGame();
    };

    document.getElementById('game2-btn').onclick = () => {
        gamesMenu.style.display = 'none';
        game2.style.display = 'block';
        initPacmanGame();
    };

    document.getElementById('game3-btn').onclick = () => {
        gamesMenu.style.display = 'none';
        game3.style.display = 'block';
        initRacerGame();
    };

    // –ö–Ω–æ–ø–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –º–µ–Ω—é
    document.getElementById('back-to-menu1').onclick = () => {
        game1.style.display = 'none';
        menu.style.display = 'block';
    };

    document.getElementById('back-to-menu2').onclick = () => {
        game2.style.display = 'none';
        menu.style.display = 'block';
    };

    document.getElementById('back-to-menu3').onclick = () => {
        game3.style.display = 'none';
        menu.style.display = 'block';
    };

    // –°–∫—Ä—ã—Ç—å –≤—Å–µ –∏–≥—Ä—ã
    function hideAllGames() {
        game1.style.display = 'none';
        game2.style.display = 'none';
        game3.style.display = 'none';
    }

    // –ü—Ä–æ—Å—Ç–µ–π—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Clumsy Bird
    function initBirdGame() {
        const canvas = document.getElementById('bird-canvas');
        const ctx = canvas.getContext('2d');
        let birdY = 200;
        let velocity = 0;
        let gravity = 0.5;
        let score = 0;
        let gameOver = false;

        function update() {
            if (gameOver) return;

            ctx.clearRect(0, 0, 300, 400);

            // –ü—Ç–∏—Ü–∞
            ctx.fillStyle = '#f1c40f';
            ctx.fillRect(100, birdY, 30, 30);

            // –§–∏–∑–∏–∫–∞
            velocity += gravity;
            birdY += velocity;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π
            if (birdY > 400 || birdY < 0) {
                gameOver = true;
                showGameOver();
                return;
            }

            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            canvas.onclick = () => {
                velocity = -10;
                score++;
            };

            // –û—á–∫–∏
            ctx.fillStyle = '#fff';
            ctx.font = '20px Arial';
            ctx.fillText(`–û—á–∫–∏: ${score}`, 10, 30);

            requestAnimationFrame(update);
        }

        function showGameOver() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, 300, 400);
            ctx.fillStyle = '#fff';
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!', 150, 180);
            ctx.fillText(`–û—á–∫–∏: ${score}`, 150, 220);
            ctx.font = '20px Arial';
            ctx.fillText('–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Ä–µ—Å—Ç–∞—Ä—Ç–∞', 150, 260);

            canvas.onclick = () => {
                birdY = 200;
                velocity = 0;
                score = 0;
                gameOver = false;
                update();
            };
        }

        update();
    }

    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Pacman
    function initPacmanGame() {
        const canvas = document.getElementById('pacman-canvas');
        const ctx = canvas.getContext('2d');
        let pacmanX = 150;
        let score = 0;

        function update() {
            ctx.clearRect(0, 0, 300, 400);

            // –ü–∞–∫–º–∞–Ω
            ctx.fillStyle = '#f1c40f';
            ctx.beginPath();
            ctx.arc(pacmanX, 200, 20, 0.2 * Math.PI, 1.8 * Math.PI);
            ctx.lineTo(pacmanX, 200);
            ctx.fill();

            // –û—á–∫–∏
            ctx.fillStyle = '#fff';
            ctx.font = '20px Arial';
            ctx.fillText(`–û—á–∫–∏: ${score}`, 10, 30);

            pacmanX = (pacmanX + 3) % 300;
            score++;
            requestAnimationFrame(update);
        }

        update();
    }

    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è 3D Racer
    function initRacerGame() {
        const canvas = document.getElementById('racer-canvas');
        const ctx = canvas.getContext('2d');
        let roadOffset = 0;
        let score = 0;

        function update() {
            ctx.clearRect(0, 0, 300, 400);

            // –î–æ—Ä–æ–≥–∞
            ctx.fillStyle = '#555';
            ctx.fillRect(0, 0, 300, 400);

            // –†–∞–∑–º–µ—Ç–∫–∞
            ctx.fillStyle = '#fff';
            for (let y = -50; y < 450; y += 100) {
                ctx.fillRect(140, y + roadOffset, 20, 50);
