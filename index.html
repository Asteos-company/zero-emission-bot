<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Все метатеги и стили остаются без изменений -->
    <!-- ... -->
</head>
<body>
    <!-- Весь HTML остаётся без изменений -->
    <!-- ... -->

    <script>
        const tg = window.Telegram.WebApp;
        
        // ... остальной код без изменений ...

            game2048Btn.addEventListener('click', () => {
                console.log('Attempting to open game...');
                
                // 1. Пробуем открыть через Telegram Game Platform
                if (tg && tg.openGame) {
                    console.log('Using openGame API method');
                    try {
                        tg.openGame('game_2048');
                        return;
                    } catch (e) {
                        console.error('openGame failed:', e);
                    }
                }
                
                // 2. Альтернативный вариант - Instant View
                console.log('Falling back to Instant View');
                const gameUrl = 'https://t.me/iv?url=https://izhenergo.github.io/2048-game/&rhash=game_2048';
                
                if (tg && tg.openLink) {
                    tg.openLink(gameUrl, {try_instant_view: true});
                } else {
                    window.open(gameUrl, '_blank');
                }
            });
            
            // ... остальной код без изменений ...
    </script>
</body>
</html>
